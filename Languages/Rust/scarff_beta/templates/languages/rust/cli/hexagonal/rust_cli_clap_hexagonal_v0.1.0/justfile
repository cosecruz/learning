default:
    @just --list

build:
    cargo build --release

dev *ARGS:
    cargo run --bin scarff -- --memory {{ARGS}}

test:
    cargo test --workspace

test-core:
    # Test core without any adapters (pure logic)
    cargo test -p scarff-core

lint:
    cargo fmt --all -- --check
    cargo clippy --workspace --all-targets --all-features -- -D warnings
    cargo deny check

fmt:
    cargo fmt --all

completions:
    mkdir -p completions
    cargo run --bin scarff -- completions bash > completions/scarff.bash
    cargo run --bin scarff -- completions zsh > completions/_scarff
    cargo run --bin scarff -- completions fish > completions/scarff.fish

audit:
    cargo audit

update:
    cargo update
    cargo outdated

clean:
    cargo clean

install:
    cargo install --path scarff-cli --force

ci: lint test build
    cargo deny check
    cargo audit
